(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0423501e"],{"0459":function(t,e,a){t.exports=a.p+"img/reveal-md-fixed6.f29c7bf5.png"},"0722":function(t,e,a){t.exports=a.p+"img/reveal-md-fixed8.f250978a.png"},"0925":function(t,e,a){t.exports=a.p+"img/question2.1523a83c.png"},"1e8d":function(t,e,a){t.exports=a.p+"img/reveal-md-fixed5.de939d66.png"},"3f2a":function(t,e,a){t.exports=a.p+"img/reveal-md-fixed9.efb09c87.png"},"3f60":function(t,e,a){t.exports=a.p+"img/reveal-md-exec.4bfe2a70.png"},"5f49":function(t,e,a){t.exports=a.p+"img/reveal-md-fixed4.66110e35.png"},"7d00":function(t,e,a){t.exports=a.p+"img/reveal-md-find3.eee86a2f.png"},"8b0c":function(t,e,a){function r(){var t=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},e=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"frontmatter-markdown"},[r("nav",{staticClass:"table-of-contents"},[r("ol",[r("li",[r("a",{attrs:{href:"#写在前面"}},[t._v(" 写在前面")])]),r("li",[r("a",{attrs:{href:"#思考"}},[t._v(" 思考")])]),r("li",[r("a",{attrs:{href:"#修改"}},[t._v(" 修改")])]),r("li",[r("a",{attrs:{href:"#结果"}},[t._v(" 结果")])]),r("li",[r("a",{attrs:{href:"#总结"}},[t._v(" 总结")])])])]),r("h1",{attrs:{id:"写在前面",tabindex:"-1"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#写在前面",target:"_blank"}},[t._v("§")]),t._v(" 写在前面")]),t._v(" "),r("p",[t._v("本文讨论一个在内网部署一个npm应用服务时一些引入导致卡慢的问题。")]),t._v(" "),r("p",[t._v("作者尝试在内网部署reveal-md的时候，打开web页面有很长时间的等待。在这里对排查和修改做下posts记录")]),t._v(" "),r("p",[t._v("当我使用自定义html和指定主题时，打开一个markdown文件，需要40多秒，所有资源加载需要60多秒，主要耗时在请求一些外网资源")]),t._v(" "),r("p",[r("img",{attrs:{src:a("fa84"),alt:""}})]),t._v(" "),r("p",[r("img",{attrs:{src:a("0925"),alt:""}})]),t._v(" "),r("hr"),t._v(" "),r("h1",{attrs:{id:"思考",tabindex:"-1"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#思考",target:"_blank"}},[t._v("§")]),t._v(" 思考")]),t._v(" "),r("p",[t._v("虽然找到问题了，需要加载外网资源，我是内网的，所有这个操作不了。那就只有两种解决思路了。必备资源的话，需要手动下载到本地，然后修改引用；如果是非必备资源，我就注销掉这个资源的引用了。幸好。从加载的最终效果上看，样式和功能都还算正常。这些超时资源是可以注释掉。")]),t._v(" "),r("p",[t._v("但因为我是直接使用全局安装的，不是用源码安装（具体reveal-md是什么和怎么安装使用的，"),r("a",{attrs:{href:"https://morebooks0.github.io/posts/reveal-markdown",target:"_blank"}},[t._v("可以看我另一个帖子")]),t._v("），那我还能改吗？是不是要下载源码下来改完，再打包才能解决（一开始对npm的理解不透彻哈，见谅见谅）。")]),t._v(" "),r("p",[r("img",{attrs:{src:a("3f60"),alt:""}})]),t._v(" "),r("hr"),t._v(" "),r("p",[t._v("其实我已经开始下载源码来准备修改了。但是还是尝试了一下，看能不能直接在reveal-md命令下改。跟踪了一下文件，发现原来如此，学到了。原来"),r("strong",[t._v("npm安装的可执行命令，只是软链接到这个服务的执行的js文件。跟手动下载源码执行 node target.js 是一样一样的。")])]),t._v(" "),r("p",[r("img",{attrs:{src:a("8de7"),alt:""}})]),t._v(" "),r("hr"),t._v(" "),r("h1",{attrs:{id:"修改",tabindex:"-1"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#修改",target:"_blank"}},[t._v("§")]),t._v(" 修改")]),t._v(" "),r("p",[t._v("那么我们一步步地注销掉这个外网资源吧。搜索sky.css 或者这个外网地址看看。原来是自定义的主题中需要引入，那就进入到这个依赖库reveal.js中theme样式中进行注销掉。或者我试试了。换成默认主题（black）就没有额外的引用。不过我觉得black不好看。还是改下sky主题的样式。")]),t._v(" "),r("p",[r("img",{attrs:{src:a("90e7"),alt:""}})]),t._v(" "),r("p",[r("img",{attrs:{src:a("7d00"),alt:""}})]),t._v(" "),r("hr"),t._v(" "),r("p",[r("img",{attrs:{src:a("d481"),alt:""}})]),t._v(" "),r("p",[t._v("改为运行看看效果。完美。")]),t._v(" "),r("p",[r("img",{attrs:{src:a("bacc"),alt:""}})]),t._v(" "),r("hr"),t._v(" "),r("p",[t._v("接着改这个livereload的资源")]),t._v(" "),r("p",[r("img",{attrs:{src:a("e9e4"),alt:""}})]),t._v(" "),r("hr"),t._v(" "),r("p",[r("img",{attrs:{src:a("5f49"),alt:""}})]),t._v(" "),r("hr"),t._v(" "),r("p",[t._v("接着改这个MathJax.js，在一个插件目录下的math.js。 我们点进去看看是什么样子的。")]),t._v(" "),r("p",[r("img",{attrs:{src:a("1e8d"),alt:""}})]),t._v(" "),r("p",[r("img",{attrs:{src:a("0459"),alt:""}})]),t._v(" "),r("hr"),t._v(" "),r("p",[r("img",{attrs:{src:a("e5b0"),alt:""}})]),t._v(" "),r("p",[t._v("进入到reveal.js的插件下，进行修改math.js")]),t._v(" "),r("p",[r("img",{attrs:{src:a("0722"),alt:""}})]),t._v(" "),r("p",[r("img",{attrs:{src:a("3f2a"),alt:""}})]),t._v(" "),r("hr"),t._v(" "),r("h1",{attrs:{id:"结果",tabindex:"-1"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#结果",target:"_blank"}},[t._v("§")]),t._v(" 结果")]),t._v(" "),r("p",[t._v("修改完几个资源后，运行看看。OK了")]),t._v(" "),r("p",[r("img",{attrs:{src:a("cc6a"),alt:""}})]),t._v(" "),r("hr"),t._v(" "),r("h1",{attrs:{id:"总结",tabindex:"-1"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#总结",target:"_blank"}},[t._v("§")]),t._v(" 总结")]),t._v(" "),r("ol",[r("li",[r("p",[t._v("npm安装的服务，可执行命令实际上只是一个软链接，链接到源码下的执行js文件中，所以需要二次开发或修改的，直接进入到该项目中修改即可（如nodejs解压安装目录下/lib/node_modules/reveal-md）")])]),t._v(" "),r("li",[r("p",[t._v("内网中对于第三方库中引入外网资源的情况，有两种解决方法。核心依赖的下载到本地进行引用（不过一般讲，第三方库中的核心依赖会自己打包引入）；如果非核心依赖资源，不影响业务但好似阻塞渲染的，就注销掉吧")]),t._v(" "),r("hr")])])])}];return{render:t,staticRenderFns:e}}const s=r();t.exports={attributes:{},vue:{component:{data:function(){return{templateRender:null}},render:function(t){return this.templateRender?this.templateRender():t("div","Rendering")},created:function(){this.templateRender=s.render,this.$options.staticRenderFns=s.staticRenderFns}}}}},"8de7":function(t,e,a){t.exports=a.p+"img/reveal-md-find1.8e767b0f.png"},"90e7":function(t,e,a){t.exports=a.p+"img/reveal-md-find2.ba90f55e.png"},bacc:function(t,e,a){t.exports=a.p+"img/reveal-md-fixed2.81048313.png"},cc6a:function(t,e,a){t.exports=a.p+"img/reveal-md-result1.085c0cab.png"},d481:function(t,e,a){t.exports=a.p+"img/reveal-md-fixed1.ac648248.png"},e5b0:function(t,e,a){t.exports=a.p+"img/reveal-md-fixed7.cc4ec440.png"},e9e4:function(t,e,a){t.exports=a.p+"img/reveal-md-fixed3.726a4912.png"},fa84:function(t,e,a){t.exports=a.p+"img/question1.30a4f6db.png"}}]);
//# sourceMappingURL=chunk-0423501e.71299472.js.map